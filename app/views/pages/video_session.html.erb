
<!-- <iframe
  src="https://tokbox.com/embed/embed/ot-embed.js?embedId=b8c20e27-37a8-477b-8799-4b3d32cccb4f&room=DEFAULT_ROOM&iframe=true"
  width="800px"
  height="640px"
  scrolling="auto"
  allow="microphone; camera"
></iframe> -->
<!-- OpenTok.js library -->
<style>
  .OT_mirrored.OT_root.OT_publisher.OT_fit-mode-cover {
  position: absolute;
  top: 150px;
  left: 20px;
}

.OT_root.OT_subscriber.OT_fit-mode-cover {
  position: relative;
  margin-top: 20px !important;
  margin-left: 300px !important;
  height: 500px !important;
  width: 800px !important;
}

#end-call {
  position: absolute;
  bottom: 100px;
  left: 45%;
}

#call-icon {
  position: absolute;
  background: red;
  color: white;
  border-radius: 50%;
  padding: 20px;
  font-size: 20px;
  position: cover;
}

</style>
<script src="https://static.opentok.com/v2/js/opentok.js"></script>
<script>

// credentials
const apiKey = '46414532';
const sessionId = '1_MX40NjQxNDUzMn5-MTU2NzY4NDIxMjM2M35yWHYxWXQ3NkM0YW1mMTI5YUtOOGVIb25-fg';
const token = 'T1==cGFydG5lcl9pZD00NjQxNDUzMiZzaWc9NzdlNTg3YmJkMDk1ZjQ2M2FmMGJiYzliMzVlYzdjNzkxMmUxYmE2YTpzZXNzaW9uX2lkPTFfTVg0ME5qUXhORFV6TW41LU1UVTJOelk0TkRJeE1qTTJNMzV5V0hZeFdYUTNOa00wWVcxbU1USTVZVXRPT0dWSWIyNS1mZyZjcmVhdGVfdGltZT0xNTY3Njg0MjM2Jm5vbmNlPTAuNTcyOTk2MDI1MjAzNTA4JnJvbGU9cHVibGlzaGVyJmV4cGlyZV90aW1lPTE1NjgyODkwMzUmaW5pdGlhbF9sYXlvdXRfY2xhc3NfbGlzdD0=';

// connect to session
const session = OT.initSession(apiKey, sessionId);

// create publisher
const publisher = OT.initPublisher();
session.connect(token, function(err) {
   // publish publisher
  session.publish(publisher);
});

// create subscriber
session.on('streamCreated', function(event) {
   session.subscribe(event.stream);
});

</script>
<%= link_to therapist_booking_assign_path do %>
<div id="end-call"><i class="fas fa-phone-slash" id="call-icon"></i></div>
<% end %>

